---
tags:
  - DB/SQL/DML-Manipulation/transaction
date created: 2021-11-13 17:48
---


## Уровни изоляции


Изолированность — более сложное понятие, чем кажется на первый взгляд. Стандарт SQL определяет четыре уровня изоляции с конкретными правилами, устанавливающими, какие изменения видны внутри и вне транзакции, а какие нет:

-   READ UNCOMMITTED - транзакции могут видеть результаты незафиксированных транзакций, промежуточные результаты (грязное чтение)
    
-   READ COMMITTED - транзакция увидит только те изменения, которые были уже зафиксированы другими транзакциями к моменту ее начала. 

возможен феномен невоспроизводимого чтения. Это означает, что вы можете выполнить одну и ту же команду дважды и получить различный результат.
    
-   REPEATABLE READ - гарантирует, что любые строки, которые считываются в контексте транзакции, будут выглядеть такими же при последовательных операциях чтения в пределах одной и той же транзакции
 
возможен феномен фантомного чтения (phantom reads)
если вы выбираете некоторый диапазон строк, затем другая транзакция вставляет новую строку в этот диапазон, после чего вы выбираете тот же диапазон снова. В результате вы увидите новую фантомную строку. Уровень изоляции REPEATABLE READ установлен по умолчанию.
    
-   SERIALIZABLE - решает проблему фантомного чтения, заставляя транзакции выполняться в таком порядке, чтобы исключить возможность конфликта. Уровень SERIALIZABLE блокирует каждую строку, которую транзакция читает.

 может возникать множество задержек и конфликтов при блокировках. На практике данный уровень изоляции применяется достаточно редко. 

Изменить уровень изоляции  SET TRANSACTION:

```Sql
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
```