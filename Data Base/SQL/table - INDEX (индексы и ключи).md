---
tags:
  - DB/SQL/DDL-Defenition/table
date created: 2021-12-07 23:50
date updated: 2021-12-09 20:39
---

```sql
-- СОЗДАНИЕ ИНДЕКСА
CREATE TABLE IF EXISTS products(
...
KEY index_of_catalog_id(catalog_id)
)

CREATE INDEX index_of_catalog_id ON products (catalog_id); -- в уже созданной таблице

-- УДАЛЕНИЕ ИНДЕКСА
DROP INDEX index_of_catalog_id ON products;
```

Типы:
BTREE  — бинарное дерево;
HASH — хэш-таблица.

## Смысл индексов

- Обычно записи в таблице располагаются в хаотическом порядке
- Чтобы найти нужную запись, необходимо сканировать всю таблицу (много времени)

> Идея индексов состоит в том, чтобы создать копию столбца, которая постоянно будет поддерживаться в отсортированном состоянии.

добавление или удаление записи (индекса) требует дополнительного времени на сортировку столбца.
Кроме того, создание копии увеличивает объем памяти, необходимый для размещения таблицы на жестком диске/оперативной памяти.

## Виды индексов

```shell
обычный индекс        # в таблице может быть несколько
уникальный индекс     # в таблице может быть несколько + значения не должны повторяться
первичный ключ        # в таблице может быть только один (предназначен для первичного ключа)
полнотекстовый индекс # индекс для TEXT, позволяющий полнотекстовый поиск (на практике используют ElasticSearch)
```

## Устройство индекса

**BTREE  (бинарное дерево)** - столбцы (значения) хранятся по порядку, все листовые страницы находятся на одинаковом расстоянии от корня (следовательно, _не нужно сканировать всю таблицу для поиска нужной информации_)

> полезно для поиска по диапазону данных

**HASH (хэш-таблица)** - для каждой строки подсистема хранения вычисляет хэш-код индексированных столбцов. В индексе хранятся хэш-коды и указатели на соответствующие строки

> полезен только для точного поиска с указанием всех столбцов индекса

## Primary key (первичный ключ)

```sql
id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT -- объявление первичного ключа
id INT UNSIGNED NOT NULL,            -- альтернанивное объявление первичного ключа
PRIMARY KEY(id)
```

индексы могут иметь собственные имена. Часто имена индексов совпадают с именами столбцов
